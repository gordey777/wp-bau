var touchScreen=!!("ontouchstart"in document||navigator.msMaxTouchPoints),retinaDisplay=1<window.devicePixelRatio,browserStorage="localStorage"in window,standaloneApp=!!("standalone"in window.navigator&&window.navigator.standalone),loader,loaderIndex,busy=!1,proData=null,mouseX,mouseY,windowLoad=0,photoSwipeOpts={captionAndToolbarAutoHideDelay:0,captionAndToolbarShowEmptyCaptions:!1,captionAndToolbarOpacity:1,backButtonHideEnabled:!1,captionAndToolbarFlipPosition:!0,imageScaleMethod:"fitNoUpscale",allowUserZoom:!1};function initTouch(){touchScreen&&($(".main-menu, .header, .wrapper, .footer, .pattern").on("click",function(e){!$(".hint").length||$(e.target).parents(".hint").length||$(e.target).hasClass("project-image")||$(e.target).hasClass("project-link")||$(".hint").remove()}),$(".news-marquee a").on("click",function(e){e.preventDefault()}),$(".menu li ul").each(function(){$(this).parent("li").find(">a").on("click",function(e){1e3<$(window).width()&&e.preventDefault()})}),$(".submenu a, .menu a, .footer a, .content a, .langs a, .line a, .logo a, .e-submit, .news-marquee a").tapHighlight())}function initHints(){$(".project-image, .news-marquee a, .project-link").on("mouseenter",function(e){$(".hint").length&&$(".hint").remove();var t,o=$(this).offset(),a="",i="",r=$(this).width();a+=$(this).attr("alt")?"<h3>"+$(this).attr("alt")+"</h3>":"",a+=$(this).data("title")?"<h3>"+$(this).data("title")+"</h3>":"",a+=$(this).data("photo")?'<div class="image"><img src="'+$(this).data("photo")+'" /></div>':"",i+=$(this).data("works")?"<b>"+projectWorks+":</b> <span>"+$(this).data("works")+"</span><br />":"",i+=$(this).data("scope")?"<b>"+projectScope+":</b> <span>"+$(this).data("scope")+" "+projectM+"²</span><br />":"",i+=$(this).data("start")?"<b>"+projectDate+":</b> <span>"+projectFrom+" "+$(this).data("start")+" "+projectTo+" "+($(this).data("end")?$(this).data("end"):projectNow)+"</span><br />":"",(i+=$(this).data("city")?"<b>"+projectCity+":</b> <span>"+$(this).data("city")+"</span><br />":"")&&(i="<div>"+i+"</div>"),touchScreen&&(i+='<a href="'+($(this).attr("href")||$(this).parent("a").attr("href"))+'" class="more">'+projectMore+"</a>"),$("body").append('<div class="hint">'+a+i+"<i></i></div>"),touchScreen&&$(this).data("photo")&&$(".hint .more").addClass("small"),$(".more").tapHighlight(),$(".hint img").load(function(){$(this).show()});var s=$(".hint").outerWidth(),n=$(".hint").outerHeight(),c=o.left-((s-r)/2-5),l=o.top-n-23;c<20&&(t=r/2+5,(c=o.left)<20&&(t=c=20)),c+s+20>$(window).width()&&(t=s-r+r/2-5,(c=o.left-s+r+10)+s+20>$(window).width()&&(c=$(window).width()-s-20,t=s-20),c<20&&(c=20,t=o.left+(r/2-15))),$(".hint").css({top:l,left:c}),$(".hint i").css({left:t}),($(this).data("photo")||$(this).hasClass("project-link"))&&(t="50%",(c=e.pageX-s/2)<20&&(c=20,(t=e.pageX-c)<20&&(t=20)),c+s+20>$(window).width()&&(c=$(window).width()-s-20,s-20<(t=e.pageX-c)&&(t=s-20)),$(".hint").css({left:c}),$(".hint i").css({left:t})),$(".hint").addClass("show")}).on("mouseleave",function(e){$(".hint").length&&!touchScreen&&$(".hint").remove()})}function initCycle(){$(".cycle-slideshow").on("cycle-after",function(e,t,o,a,i){var r=$(".citation .active"),s=$(a).attr("title");r.next().length?r.next().addClass("active"):$(".citation div:first-child").addClass("active"),r.removeClass("active"),$(".cycle-caption").html(s?"<h3>"+s+"</h3><p>"+$(a).attr("alt")+"</p>":"")})}function fitBG(){$(".cycle-slideshow").imagefit({mode:"outside",force:!0,halign:"center",valign:"top"}),$(window).height()>$(".container").outerHeight()+(1e3<$(window).width()?140:60)+$(".footer").height()?$(".footer").addClass("fixed"):$(".footer").removeClass("fixed"),1440<$(window).width()?$(".sidebar").css({right:($(window).width()-1440)/2+40}):$(".sidebar").css({right:40}),$(".content .e-video").css({height:$(".content .e-video").width()/$(".content .e-video").data("ratio")+10}),$(window).width()<1e3?$(".project-body .project-cycle, .project-body .youtube").css({height:$(".project-body .project-cycle").width()/1.5}):$(".project-body .project-cycle, .project-body .youtube").css({height:""})}function initMap(){if("object"==typeof google&&"object"==typeof google.maps){var e=[{featureType:"all",elementType:"geometry",stylers:[{color:"#222222"}]},{featureType:"all",elementType:"labels.text.fill",stylers:[{color:"#aaaaaa"}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#ffcc00"},{weight:"1.5"}]},{featureType:"administrative.province",elementType:"all",stylers:[{color:"#777777"},{weight:"0.75"}]},{featureType:"administrative.province",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.icon",stylers:[{color:"#777777"}]},{featureType:"administrative.neighborhood",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#333333"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#444444"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:"0.5"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#555555"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"on"},{weight:"0.1"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{saturation:"-40"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#555555"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#494e52"}]}];if($("#office-map").length){var t={url:"/wp-content/themes/wp-bau/img/"+(retinaDisplay?"marker-2x":"marker")+".png",scaledSize:new google.maps.Size(56,56)},o=new google.maps.LatLng(50.455169,30.640285),a=new google.maps.Map(document.getElementById("office-map"),{styles:e,zoom:14,center:o,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0});new google.maps.Marker({position:o,map:a,icon:t,optimized:!1});initMapZoom(a,google.maps.ControlPosition.RIGHT_TOP)}if($("#projects-map").length){var i=new google.maps.LatLng(49.176162,31.294052),r=7;$(window).width()<600&&(i=new google.maps.LatLng(50.450305,30.523775),r=8);var s=new google.maps.Map(document.getElementById("projects-map"),{styles:e,zoom:r,center:i,mapTypeId:google.maps.MapTypeId.ROADMAP,disableDefaultUI:!0});initMapZoom(s,google.maps.ControlPosition.LEFT_TOP),loadMarkers(s),$(".container").on("click","#project-details i",function(){$(".pro-cycle").length&&$(".pro-cycle").cycle("destroy"),$("#project-details").remove()})}}}function initMapZoom(e,t){var o=document.createElement("div");o.className="zoom";var a=document.createElement("div");a.className="in",o.appendChild(a);var i=document.createElement("div");i.className="separator",o.appendChild(i);var r=document.createElement("div");r.className="out",o.appendChild(r),e.controls[t].push(o),google.maps.event.addDomListener(a,"click",function(){e.setZoom(e.getZoom()+1)}),google.maps.event.addDomListener(r,"click",function(){e.setZoom(e.getZoom()-1)})}function loadMarkers(map){for(var list="",needs="",n=[],z=[],i=0;i<proData.length;i++){var pos=new google.maps.LatLng(proData[i][0],proData[i][1]),s=proData[i][2],d=proData[i][4],size=1==s?"-big":"-small",dir=1==d?"-left":"-right",sw=1==s?22:10,sh=1==s?30:16,ax=1==s?1==d?19:1:1==d?8:1,ay=1==s?29:15,x2=retinaDisplay?"-2x":"",ico={url:"/wp-content/themes/wp-bau/img/flag"+size+dir+x2+".png",scaledSize:new google.maps.Size(sw,sh),anchor:new google.maps.Point(ax,ay)},marker=new google.maps.Marker({position:pos,map:map,zIndex:10,icon:ico,optimized:!1});eval('google.maps.event.addListener(marker, "click", function(event) {showProjectInfo('+i+")})"),eval('google.maps.event.addListener(marker, "mouseover", function(event) {showMapHint('+i+")})"),google.maps.event.addListener(marker,"mouseout",function(e){$("#map-hint").hide()}),proData[i].push(marker)}}function showMapHint(e){$("#map-hint").html(proData[e][5]).show()}function showProjectInfo(e){var t="",o="",a="";$(".pro-cycle").length&&$(".pro-cycle").cycle("destroy"),$("#project-details").remove();var i=window.location.href,r=i.match(/\/(en|uk|ru)\//)?i.match(/(\/(en|uk|ru))/)[0]:"";if($(window).width()<600){$("#map-hint").hide();var s=r+"/projects/"+proData[e][12]+"/";return $(".project-body").addClass("hide").show(),$("#projects-main").addClass("hide"),$(".hint").remove(),fitBG(),loadProject(s,function(){$(".pro-cycle").length&&$(".pro-cycle").cycle("pause"),$("#projects-main").css({visibility:"hidden"})}),void(window.location=s.replace(/\/projects\//i,"/projects/#/"))}if($("#projects-main").append('<div id="project-details"></div>'),t+=proData[e][5]?"<h3>"+proData[e][5]+"</h3>":"",proData[e][13]){for(var n=proData[e][13].split(","),c=proData[e][14].split(","),l=0;l<n.length;l++)a+='<a href="'+c[l]+'"><img src="'+n[l]+'" alt="'+proData[e][5].replace(/"/g,"&quot;")+'" /></a>';t+='<div class="pro-cycle"><span class="cycle-pager"></span>'+a+"</div>"}o+=proData[e][8]?"<b>"+projectWorks+":</b> <span>"+proData[e][8]+"</span><br />":"",o+=proData[e][9]?"<b>"+projectScope+":</b> <span>"+proData[e][9]+" "+projectM+"²</span><br />":"",o+=proData[e][6]?"<b>"+projectDate+":</b> <span>"+projectFrom+" "+proData[e][6]+" "+projectTo+" "+(proData[e][7]?proData[e][7]:projectNow)+"</span><br />":"",(o+=proData[e][11]?"<b>"+projectClient+":</b> <span>"+proData[e][11]+"</span><br />":"")&&(o='<div class="details">'+o+"</div>"),t+=o,t+='<a href="'+r+"/projects/"+proData[e][12]+'/" class="more">'+projectMore+"</a>",$("#project-details").html(t+"<i></i>"),$(".more").tapHighlight(),$(".pro-cycle").cycle({slides:"> a",pauseOnHover:!0}),$(".pro-cycle a").length&&$(".pro-cycle a").photoSwipe(photoSwipeOpts)}function initProjects(){initProjectsSlideshow(),$(".content").on("click",".steps-wrap h3",function(){$(".project-body").toggleClass("close-steps"),$(".projects-line.steps .scroll").html().match(/<\!--/)&&($(".projects-line.steps .scroll").html($(".projects-line.steps .scroll").html().replace(/(<\!--|-->)/gi,"")),$(".projects-line.steps a").length&&$(".projects-line.steps a").photoSwipe(photoSwipeOpts)),$(".project-body .projects-line").length&&$(".project-body .projects-line").checkScroll(),fitBG()}),window.location.href.match(/\/projects\/#\/([a-z0-9-\/]+)$/)&&($(".project-body").show(),fitBG(),loadProject(window.location.href.replace(/\/#/i,"")),$("#projects-main").addClass("hide").css({visibility:"hidden"}),fitBG()),$("body").on("click",".media-btn",function(e){$(".project-cycle-wrap").toggleClass("video")}),$('.menu a[href$="/projects/"]').on("click",function(e){if(busy)return e.preventDefault(),!1;if($("#projects-main").length&&$(".project-body").length){e.preventDefault(),busy=!0,$("html").removeClass("overflow"),$(".project-body").addClass("hide");var t=$(this).attr("href");return setTimeout(function(){$("#projects-main").css({visibility:"visible"}).removeClass("hide"),$(".project-cycle").cycle("destroy"),$(".project-body").hide(),fitBG(),$(".pro-cycle").length&&$(".pro-cycle").cycle("resume"),$(".project-body").removeClass("anim"),busy=!1},1e3),window.location=t.replace(/\/projects\//i,"/projects/#/"),!1}}),$("body").on("click","a",function(e){if(busy)return e.preventDefault(),!1;var t=$(this).attr("href");return t.match(/\/projects\//)?(e.preventDefault(),touchScreen&&($(this).hasClass("project-link")||$(this).find("img").hasClass("project-image"))||($(".project-body").addClass("hide").show(),$("#projects-main").addClass("hide"),$(".hint").remove(),fitBG(),loadProject(t,function(){$(".pro-cycle").length&&$(".pro-cycle").cycle("pause"),$("#projects-main").css({visibility:"hidden"})},$(this).attr("class")),window.location=t.replace(/\/projects\//i,"/projects/#/")),!1):void 0}),$("body").on("click",".project-nav .top",function(e){if(busy)return e.preventDefault(),!1;if($("#projects-main").length&&$(".project-body").length){e.preventDefault(),busy=!0,$("html").removeClass("overflow"),$(".project-body").addClass("hide");var t=$(this).attr("href");return setTimeout(function(){$("#projects-main").css({visibility:"visible"}).removeClass("hide"),$(".project-cycle").cycle("destroy"),$(".project-body").hide(),fitBG(),$(".pro-cycle").length&&$(".pro-cycle").cycle("resume"),$(".project-body").removeClass("anim"),busy=!1},1e3),window.location=t.replace(/\/projects\//i,"/projects/#/"),!1}})}function loadProject(t,o,e){if(!busy){busy=!0;var a=0;"next"==e&&(a=$(window).width(),$("html").addClass("overflow")),"prev"==e&&(a=-$(window).width(),$("html").addClass("overflow")),$(".project-body").addClass("anim").move3d(-a,-0),setTimeout(function(){$(".project-body").removeClass("anim").move3d(a,0),$(".loader").hideLoader(),$(".container").showLoader(),fitBG();t.match(/\?/);var e={action:"ajaxgetpost",posturl:t};$.ajax({url:adminAjax.ajaxurl,data:e,type:"POST",success:function(e){$(".project-cycle").cycle("destroy"),$(".project-body").html(e).removeClass("hide"),fitBG(),initProjectsSlideshow(),$(".project-cycle a").length&&windowLoad&&$(".project-cycle").cycle("resume"),$(".project-body .scroll-left, .project-body .scroll-right").unbind("touchstart mouseover").off("touchend mouseout"),$(".project-body .projects-line").length&&$(".project-body .projects-line").scrollContent(),$(".container").hideLoader(),$("body, html").scrollTop(0),$(".project-nav .prev, .project-nav .next, .project-nav .top").tapHighlight(),o&&o(),$(".project-body").addClass("anim").move3d(0,0),setTimeout(function(){$(".project-body").removeClass("anim"),$(".project-body").find(".steps-wrap").length?$(".project-body").addClass("close-steps"):$(".project-body").addClass("no-steps"),fitBG(),busy=!1},1e3)}})},1e3)}}function initProjectsSlideshow(){$(".project-cycle a").length&&($(".project-cycle").cycle({slides:"> a",pagerTemplate:"<span><img src='{{firstChild.src}}'></span>",pager:".project-cycle-pager",pauseOnHover:!0}),$(".project-cycle").cycle("pause"),$(".project-cycle").on("cycle-after",function(){var e=$(".project-cycle-pager-scroll .cycle-pager-active").position(),t=$(".project-cycle-pager-scroll").scrollTop();(e.top>t+330||e.top<t)&&$(".project-cycle-pager-scroll").stop().animate({scrollTop:e.top},500)}),$(".project-cycle a").photoSwipe(photoSwipeOpts)),$(".projects-line.steps a").length&&$(".projects-line.steps a").photoSwipe(photoSwipeOpts)}function check_career_form(){var e,t=new Array("form_name","form_phone","form_specialty","form_message"),o=document.getElementById("form_email");for(e=0;e<t.length;e++){var a=document.getElementById(t[e]);if(""==a.value)return alert(careerAlert),a.focus(),!1}return!!o.value.match(/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/)||(alert(careerEmailAlert),o.focus(),!1)}$(document).ready(function(){touchScreen&&$("body").removeClass("cursor"),$("a[rel^='zoom']").length&&$("a[rel^='zoom']").photoSwipe(photoSwipeOpts),fitBG(),initMap(),initHints(),initProjects(),initTouch(),$(".loader").showLoader(),$(".news-marquee").length&&$(".news-marquee").marquee({duration:2e4,gap:0,delayBeforeStart:0,direction:"left",pauseOnHover:!0,duplicated:!0})}),$(window).load(function(){$(".projects-line").length&&$(".projects-line").each(function(){$(this).scrollContent()}),$("#main-page").length&&initCycle(),fitBG(),$(".container").css({visibility:"visible"}),setTimeout(function(){$(".loader").addClass("hide"),setTimeout(function(){$(".loader").hideLoader(),$(".loader").remove()},300),$(".project-cycle a").length&&$(".project-cycle").cycle("resume"),windowLoad=1},300)}),$(window).scroll(function(){40<=$(window).scrollTop()?$(".header").addClass("black"):$(".header").removeClass("black")}),$(window).resize(function(){$(".projects-line").length&&$(".projects-line").each(function(){$(this).checkScroll()}),fitBG()}),$(document).mousemove(function(e){if(!touchScreen&&$("#map-hint").length){var t=e.pageX;$(window).width()<$("#map-hint").outerWidth()+t&&(t-=$("#map-hint").outerWidth()),$("#map-hint").css({top:e.pageY,left:t})}}),$(window).on("hashchange",function(){if(!busy){var e=window.location.href.replace(/\/#/i,"");e.match(/\/projects\/$/)&&$("#projects-main").length?(busy=!0,$("html").removeClass("overflow"),$(".project-body").addClass("hide"),setTimeout(function(){$("#projects-main").css({visibility:"visible"}).removeClass("hide"),$(".project-cycle").cycle("destroy"),$(".project-body").hide(),fitBG(),$(".pro-cycle").length&&$(".pro-cycle").cycle("resume"),$(".project-body").removeClass("anim"),busy=!1},1e3)):e.match(/\/projects\//)&&($(".project-body").addClass("hide").show(),$("#projects-main").addClass("hide"),$(".hint").remove(),fitBG(),loadProject(e,function(){$(".pro-cycle").length&&$(".pro-cycle").cycle("pause"),$("#projects-main").css({visibility:"hidden"})}))}}),jQuery.fn.showLoader=function(e){var t=e?' class="'+e+'"':"";$(this).append('<div id="loader"'+t+"></div>");var o=retinaDisplay?0:64,a=t.match(/small/)?16:32;t.match(/small/)&&(o=retinaDisplay?32:96),$("#loader").css({backgroundPosition:"-"+o+"px -"+a+"px"}),loaderIndex=2,loader=setInterval(function(){$("#loader").css({backgroundPosition:"-"+o+"px -"+loaderIndex*a+"px"}),loaderIndex=(loaderIndex+1)%12},60)},jQuery.fn.hideLoader=function(){$(this).find("#loader").length&&($(this).find("#loader").remove(),clearInterval(loader),loaderIndex=1,loader=0)},jQuery.fn.scrollContent=function(){var t,o,a,i=this,r=$(this).find(".scroll"),s=$(this).find(".scroll-left"),n=$(this).find(".scroll-right");$(this).checkScroll(),r.scroll(function(){$(i).checkScroll()}),s.bind("touchstart mouseover",function(e){touchScreen&&"mouseover"==e.type||(e.preventDefault(),t=setInterval(function(){r.scrollLeft()-3<=0?(s.css({display:"none"}),a=0):(n.css({display:"block"}),a=r.scrollLeft()-3),r.scrollLeft(a)},10))}).on("touchend mouseout",function(){clearInterval(t)}),n.bind("touchstart mouseover",function(e){touchScreen&&"mouseover"==e.type||(e.preventDefault(),o=setInterval(function(){var e=0;$(i).find("a").each(function(){e+=$(this).width()+20});var t=e-r.width();r.scrollLeft()+3>=t?(n.css({display:"none"}),a=t):(s.css({display:"block"}),a=r.scrollLeft()+3),r.scrollLeft(a)},10))}).on("touchend mouseout",function(){clearInterval(o)})},jQuery.fn.checkScroll=function(){var e=$(this).find(".scroll"),t=$(this).find(".scroll-left"),o=$(this).find(".scroll-right"),a=0;if($(this).find("a").each(function(){a+=$(this).width()+20}),$(".hint").length&&$(".hint").remove(),a>e.width()){var i=a-e.width();0==e.scrollLeft()?(t.css({display:"none"}),o.css({display:"block"})):e.scrollLeft()>=i?(t.css({display:"block"}),o.css({display:"none"})):(t.css({display:"block"}),o.css({display:"block"}))}else t.css({display:"none"}),o.css({display:"none"})},jQuery.fn.tapHighlight=function(){touchScreen&&$(this).on("touchstart",function(e){$(this).addClass("tap")}).on("touchend",function(){$(this).removeClass("tap")})};var support3d=function(){var e,t="transform:translate3d(0px, 0px, 0px)",o=document.createElement("div");return o.style.cssText="-webkit-"+t+"; -moz-"+t+"; -ms-"+t+"; -o-"+t+"; "+t,null!==(e=o.style.cssText.match(/translate3d\(0px, 0px, 0px\)/g))&&1===e.length};jQuery.fn.move3d=function(e,t){var o="translate",a="";return t=t||0,support3d&&(o="translate3d",a=", 0px"),$(this).css({"-webkit-transform":o+"("+e+"px, "+t+"px"+a+")","-moz-transform":o+"("+e+"px, "+t+"px"+a+")","-ms-transform":o+"("+e+"px, "+t+"px"+a+")","-o-transform":o+"("+e+"px, "+t+"px"+a+")",transform:o+"("+e+"px, "+t+"px"+a+")"}),$(this)};
//# sourceMappingURL=maps/core.js.map
